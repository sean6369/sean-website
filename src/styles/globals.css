@tailwind base;
@tailwind components;
@tailwind utilities;

/* Clash Display Font from Fontshare */
@import url('https://api.fontshare.com/v2/css?f[]=clash-display@600&display=swap');

@layer base {
    :root {
        --font-new-york: 'New York', 'Times New Roman', Georgia, serif;
        --font-menlo: Menlo, Monaco, 'Courier New', monospace;
        --font-bebas-neue: var(--font-bebas-neue), 'Arial Black', sans-serif;

        /* Light theme colors - Custom backgrounds with Anupuccin Latte text */
        --background: #F1E7DD;
        --background-secondary: #F1E7DD;
        --background-tertiary: #E8DED1;
        --foreground: #4c4f69;
        /* Anupuccin Latte text */
        --foreground-secondary: #5c5f77;
        /* Anupuccin Latte subtext1 */
        --foreground-tertiary: #6c6f85;
        /* Anupuccin Latte subtext0 */
        --surface: #F7F3F0;
        --surface-secondary: #F0E9E2;
        --surface-tertiary: #E8DDD4;
        --overlay: #9ca0b0;
        /* Anupuccin Latte overlay2 */
        --overlay-secondary: #8c8fa1;
        /* Anupuccin Latte overlay1 */
        --overlay-tertiary: #7c7f93;
        /* Anupuccin Latte overlay0 */
        /* Theme-aware accent colors for light mode - Rose Pine */
        --primary: #e6a85c;
        /* Rose Pine gold - darker warm yellow-orange */
        --secondary: #d48a87;
        /* Rose Pine rose - darker soft coral */
        --hero-gradient-1: #d4a85c;
        --hero-gradient-2: #d18a7a;
        --hero-gradient-3: #8bb5d4;
        --accent: #04a5e5;
        /* Anupuccin Latte sky */
        --card: 0 0% 100%;
        --card-foreground: 0 0% 3.9%;
        --popover: 0 0% 100%;
        --popover-foreground: 0 0% 3.9%;
        --primary-foreground: 0 0% 98%;
        --secondary-foreground: 0 0% 9%;
        --muted: 0 0% 96.1%;
        --muted-foreground: 0 0% 45.1%;
        --accent-foreground: 0 0% 9%;
        --destructive: 0 72% 51%;
        --destructive-foreground: 0 0% 98%;
        --border: 0 0% 89.8%;
        --input: 0 0% 89.8%;
        --ring: 0 0% 3.9%;
        --chart-1: 12 76% 61%;
        --chart-2: 173 58% 39%;
        --chart-3: 197 37% 24%;
        --chart-4: 43 74% 66%;
        --chart-5: 27 87% 67%;
        --radius: 0.5rem;
    }

    .dark {
        /* Dark theme colors (Anupuccin) */
        --background: #181825;
        --background-secondary: #181825;
        --background-tertiary: #11111b;
        --foreground: #cdd6f4;
        --foreground-secondary: #bac2de;
        --foreground-tertiary: #a6adc8;
        --surface: #313244;
        --surface-secondary: #585b70;
        --surface-tertiary: #45475a;
        --overlay: #6c7086;
        --overlay-secondary: #7f849c;
        --overlay-tertiary: #9399b2;
        /* Theme-aware accent colors for dark mode */
        --primary: #cba6f7;
        --secondary: #f5c2e7;
        --accent: #89dceb;
        --hero-gradient-1: #f2d2ff;
        --hero-gradient-2: #ffcfe5;
        --hero-gradient-3: #b5d8ff;
        --card: 0 0% 3.9%;
        --card-foreground: 0 0% 98%;
        --popover: 0 0% 3.9%;
        --popover-foreground: 0 0% 98%;
        --primary-foreground: 0 0% 9%;
        --secondary-foreground: 0 0% 98%;
        --muted: 0 0% 14.9%;
        --muted-foreground: 0 0% 63.9%;
        --accent-foreground: 0 0% 98%;
        --destructive: 0 91% 71%;
        --destructive-foreground: 0 0% 98%;
        --border: 0 0% 14.9%;
        --input: 0 0% 14.9%;
        --ring: 0 0% 83.1%;
        --chart-1: 220 70% 50%;
        --chart-2: 160 60% 45%;
        --chart-3: 30 80% 55%;
        --chart-4: 280 65% 60%;
        --chart-5: 340 75% 55%;
    }

    * {
        @apply border-surface-secondary;
    }

    body {
        @apply bg-background text-foreground font-new-york;
        background-color: var(--background);
        max-width: 100vw;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
    }

    /* Normalize serif font rendering across all fallbacks */
    .font-new-york {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
        font-feature-settings: "kern" 1, "liga" 1;
    }

    /* Clash Display font styling */
    .font-clash-display {
        font-family: 'Clash Display', sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
    }

    ::selection {
        background-color: var(--primary);
        color: var(--background);
        opacity: 0.2;
    }

    html {
        scroll-behavior: smooth;
        overflow-x: hidden;
    }

    /* Ensure sections don't create individual scrollbars */
    section {
        overflow-x: hidden;
    }

    /* Custom scrollbar */
    ::-webkit-scrollbar {
        width: 8px;
    }

    ::-webkit-scrollbar-track {
        @apply bg-background;
    }

    ::-webkit-scrollbar-thumb {
        @apply bg-surface rounded-full;
    }

    ::-webkit-scrollbar-thumb:hover {
        @apply bg-surface-secondary;
    }
}

@layer components {
    .glass-effect {
        @apply backdrop-blur-md border border-surface;
        background-color: var(--background);
        opacity: 0.8;
    }

    .gradient-text {
        @apply bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent;
    }

    .hero-gradient-text {
        background-image: linear-gradient(120deg,
                var(--hero-gradient-1),
                var(--hero-gradient-2),
                var(--hero-gradient-3),
                var(--hero-gradient-1));
        background-size: 260% 260%;
        background-clip: text;
        -webkit-background-clip: text;
        color: transparent;
        animation: hero-gradient-flow 9s ease-in-out infinite;
    }

    .gradient-border {
        @apply relative;
    }

    .gradient-border::before {
        @apply absolute inset-0 rounded-lg p-[1px] bg-gradient-to-r from-primary to-secondary;
        content: '';
        mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        mask-composite: xor;
    }

    .button-primary {
        @apply bg-primary text-background font-medium px-6 py-3 rounded-lg transition-all duration-200;
        background-color: var(--primary);
    }

    .button-primary:hover {
        background-color: var(--primary);
        opacity: 0.9;
    }

    .button-secondary {
        @apply border border-surface-secondary hover:border-primary text-foreground hover:text-primary font-medium px-6 py-3 rounded-lg transition-all duration-200 transform hover:scale-105 active:scale-95;
    }

    .section-padding {
        @apply py-16 md:py-24 lg:py-32;
    }

    /* Milestones divider: same as body text at reduced opacity (works with CSS variables in light/dark) */
    .milestones-divider {
        border-top-width: 1px;
        border-top-style: solid;
        border-top-color: var(--overlay);
    }
    @supports (border-top-color: color-mix(in srgb, red 50%, transparent)) {
        .milestones-divider {
            border-top-color: color-mix(in srgb, var(--foreground) 35%, transparent);
        }
    }

    /* Milestone logos: feathered edges in a square (opacity fades at edges) */
    .milestone-logo-soft-edges {
        -webkit-mask-image:
            linear-gradient(to right, transparent 0%, black 4%, black 96%, transparent 100%),
            linear-gradient(to bottom, transparent 0%, black 4%, black 96%, transparent 100%);
        mask-image:
            linear-gradient(to right, transparent 0%, black 4%, black 96%, transparent 100%),
            linear-gradient(to bottom, transparent 0%, black 4%, black 96%, transparent 100%);
        -webkit-mask-size: 100% 100%;
        mask-size: 100% 100%;
        -webkit-mask-position: center;
        mask-position: center;
        -webkit-mask-composite: source-in;
        mask-composite: intersect;
    }

    .container-custom {
        @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
        max-width: min(100vw, 80rem);
    }

    /* Hide scrollbar for mobile stepper */
    .scrollbar-hide {
        -ms-overflow-style: none;
        /* Internet Explorer 10+ */
        scrollbar-width: none;
        /* Firefox */
    }

    .scrollbar-hide::-webkit-scrollbar {
        display: none;
        /* Safari and Chrome */
    }

    /* Logo styling with rounded edges */
    .logo-rounded {
        border-radius: 12px;
        overflow: hidden;
    }

    /* Apply rounded corners to favicon and metadata images */
    img[src*="sean_logo.png"],
    img[src*="/logos/sean_logo"] {
        border-radius: 12px;
    }

    /* Utility classes for common patterns */
    .transition-smooth {
        @apply transition-all duration-300;
    }

    .hover-scale {
        @apply hover:scale-105 active:scale-95;
    }

    .gradient-primary {
        @apply bg-gradient-to-r from-primary to-secondary;
    }

    .form-input {
        @apply bg-surface border-surface-secondary focus:border-primary focus-visible:ring-primary transition-all duration-300 hover:border-primary/50;
    }

    .social-link {
        @apply relative text-foreground/70 hover:text-foreground transition-all duration-300 hover:translate-x-1 hover:scale-105;
    }

    .social-link::after {
        @apply absolute left-0 bottom-0 w-0 h-0.5 bg-gradient-to-r from-primary to-secondary transition-all duration-300;
        content: '';
    }

    .social-link:hover::after {
        @apply w-full;
    }

    @keyframes hero-gradient-flow {
        0% {
            background-position: 0% 50%;
        }

        50% {
            background-position: 100% 50%;
        }

        100% {
            background-position: 0% 50%;
        }
    }

    .button-hover {
        @apply transition-all duration-300 hover:scale-110 active:scale-95;
    }

    /* Reduced motion support */
    @media (prefers-reduced-motion: reduce) {

        *,
        *::before,
        *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
            scroll-behavior: auto !important;
        }
    }

    /* Animated Logo Path Tracing */
    .animate-logo {
        animation: logo-fade-in 1s ease-in-out;
    }

    .logo-path {
        stroke-dasharray: 2000;
        stroke-dashoffset: 2000;
        animation: logo-trace 3s ease-in-out infinite;
    }

    @keyframes logo-fade-in {
        0% {
            opacity: 0;
            transform: scale(0.8);
        }

        100% {
            opacity: 1;
            transform: scale(1);
        }
    }

    @keyframes logo-trace {
        0% {
            stroke-dashoffset: 2000;
        }

        50% {
            stroke-dashoffset: 0;
        }

        100% {
            stroke-dashoffset: 0;
        }
    }

    /* Blog prose styles */
    .prose {
        @apply text-foreground;
        max-width: 65ch;
    }

    .prose h1,
    .prose h2,
    .prose h3,
    .prose h4 {
        @apply font-bold text-foreground;
        margin-top: 2em;
        margin-bottom: 1em;
        line-height: 1.3;
        font-weight: 800;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        letter-spacing: -0.01em;
    }

    .prose h1 {
        @apply text-4xl;
    }

    .prose h2 {
        @apply text-3xl;
    }

    .prose h3 {
        @apply text-2xl;
    }

    .prose h4 {
        @apply text-xl;
    }

    .prose p {
        @apply text-foreground;
        margin-bottom: 1.5em;
        line-height: 1.75;
        opacity: 0.9;
    }

    .prose a {
        @apply text-primary hover:underline;
        transition: all 0.2s;
    }

    .prose strong {
        @apply text-foreground font-semibold;
    }

    .prose em {
        @apply italic;
    }

    .prose ul,
    .prose ol {
        @apply ml-6;
        margin-bottom: 1.5em;
    }

    .prose ul {
        @apply list-disc;
    }

    .prose ol {
        @apply list-decimal;
    }

    .prose li {
        @apply text-foreground;
        margin-bottom: 0.5em;
        opacity: 0.9;
    }

    .prose blockquote {
        @apply border-l-4 border-primary pl-4 italic;
        margin: 2em 0;
        color: var(--foreground-secondary);
    }

    .prose code {
        @apply bg-surface px-1.5 py-0.5 rounded text-sm font-mono;
        color: var(--foreground);
    }

    .prose pre {
        @apply bg-surface-secondary p-4 rounded-lg overflow-x-auto;
        margin: 2em 0;
    }

    .prose pre code {
        @apply bg-transparent p-0;
    }

    .prose img {
        @apply rounded-lg;
        margin: 2em 0;
    }

    .prose hr {
        @apply border-surface-secondary;
        margin: 3em 0;
    }

    /* Dark mode prose adjustments */
    .dark .prose {
        @apply text-foreground;
    }

    .dark .prose h1,
    .dark .prose h2,
    .dark .prose h3,
    .dark .prose h4 {
        @apply text-foreground;
    }

    .dark .prose p {
        @apply text-foreground;
        opacity: 0.9;
    }

    .dark .prose a {
        @apply text-primary;
    }

    .dark .prose strong {
        @apply text-foreground;
    }

    .dark .prose code {
        @apply bg-surface;
        color: var(--foreground);
    }

    .dark .prose pre {
        @apply bg-surface-secondary;
    }

    .dark .prose blockquote {
        @apply border-primary;
        color: var(--foreground-secondary);
    }
}